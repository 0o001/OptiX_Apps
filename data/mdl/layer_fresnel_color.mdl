mdl 1.4;
import ::df::*;

export material layer_fresnel_color(
  uniform float parLayerIorR        = 1.5,  // The IOR cannot be a color on the GUI side or 1.0 would be the maximum!
  uniform float parLayerIorG        = 1.5,
  uniform float parLayerIorB        = 1.5,
  uniform color parLayerWeight      = color(1.0),
  uniform color parSpecularTint     = color(1.0),
  uniform color parDiffuseTint      = color(0.980392, 0.729412, 0.470588)
  // , uniform float parDiffuseRoughness = 0.0
)
= 
material(
  surface: material_surface(
    scattering: df::color_fresnel_layer(
      ior:    color(parLayerIorR, parLayerIorG, parLayerIorB),
      weight: parLayerWeight,
      layer: df::specular_bsdf(
        tint: parSpecularTint,
        mode: df::scatter_reflect
      ),
      base: df::diffuse_reflection_bsdf(
        tint:      parDiffuseTint
        // , roughness: parDiffuseRoughness
      )
    )
  )
);
